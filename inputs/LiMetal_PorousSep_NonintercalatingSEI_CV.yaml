#===============================================================================
#  input_template.yaml
#
#  User inputs for bat-can model creation and running.
#===============================================================================

cell-description:
#This section can have any attributes just do whatever you want
  anode:
    class: 'dense_electrode'
    bulk-phase: 'lithium_metal' # Cantera phase name
    surf-phase: 'lithium_electrolyte' # Cantera phase name
    electrolyte-phase: 'electrolyte' # Cantera phase name
    conductor-phase: 'metal' # Cantera phase name
    stored-ion: # Details on the stored species. Used for capacity calc.
      name: Li[metal]
      charge: 1
    mobile-ion:  'Li+(e)' # Species name for Li+ in elyte.
    thickness: 1000e-6 # anode thickness, m
    minimum-thickness: 1e-9 # minimum anode thickness. 
    phi_0: 0. # Initial electric potential, V
    A_surf_ratio: 1.0 # Interface area per unit geometric area
    C_dl: 6e-5 #F/m2
    dy_elyte: 2e-6
  separator:
    class: 'porous_separator'
    thickness: 100e-6  # separator thickness, m
    n_points: 3       # Number of finite volumes to discretize
    electrolyte-phase: 'electrolyte' # Cantera phase name
    sigma_io: 0.272 # S/m for 1M LiTFSI in TEGDME at 25 deg C // Chen, 2019
    phi_0: 2.67 # Initial electric potential, V // Yin, 2017
    eps_electrolyte: 1.0 # Electrolyte volume fraction, -
    transport:
      mobile-ion:  'Li+(e)'
      model: 'dilute-solution'
      diffusion-coefficients: # Species names must match those in the phase 
      #definition, below: # fix diffusion coefficients later...
        - species: 'C3H4O3(e)'
          D_k: 1.e-10 # m2 S-1 // Placeholder
        - species: 'C4H8O3(e)'
          D_k: 1.e-10 # m2 S-1 // Placeholder
        - species: 'Li+(e)'
          D_k:  1.e-10 # m2 S-1 // Placeholder
        - species: 'PF6-(e)'
          D_k:  1.e-10 # m2 S-1 // Placeholder
        - species: 'C2H4(e)'
          D_k:  1.e-10 # m2 S-1 // Placeholder
        - species: 'CO(e)'
          D_k:  1.e-10 # m2 S-1 // Placeholder
        - species: 'CO2(e)'
          D_k:  1.e-10 # m2 S-1 // Placeholder
  cathode:
    class: 'nonintercalating_interphase'
    bulk-phase: 'metal'
    electrolyte-phase: 'electrolyte' # Cantera phase name
    interphase: 'sei' # Cantera phase name
    conductor-phase: 'conductor' # Cantera phase name
    bulk-elyte-interface: 'tungsten-elyte' # Cantera phase name
    bulk-interphase-interface: 'tungsten-sei' # Cantera phase name
    interphase-elyte-interface: 'sei-elyte' # Cantera phase name
    mobile-ion:  'Li+(e)' # Species name for Li+ in elyte.
    dy_elyte: 1.0e-9 # domain thickness, m
    d_interphase: 1.0e-9 # representative diameter of an sei particle, m
    phi_0: 2.65 # Initial electric potential, V
    eps_0: 1.E-6 # Initial SEI volume fraction
    eps_max: 0.9 # Maximum SEI volume fraction
    C_dl_elyte: 6e-5 # F/m2 
    C_dl_bulk: 2e-7 # F/m2
    electron-conductivity:
      - species: 'LEDC(sei)'
        sigma_el: 1.2E-11
      - species: 'Li2CO3(sei)'
        sigma_el: 3.2E-11
      - species: 'Li2O(sei)'
        sigma_el: 5.2E-11

# Simulation parameters:
parameters:
  T: 25 # C
  P: 101325 # Pa
  # Describe simulation type, parameters, etc.
  simulation:
    type: 'cyclic_voltammetry' # CV cycle
    # potential sweep rate, format: XX units. 
    # Units are 'potential/time' (e.g. mV/s)
    sweep-rate: 10 mV/s 
    lower-cutoff: 2.0 # lower voltage limit, V
    upper-cutoff: 2.5 # upper voltage limit, V
    n_cycles: 5.0 # Number of complete cycles
    # Init sweep direction: positive or negative going?
    initial-sweep: 'negative' 
    # Initial potential: either a number (V) or the string 'ocv'
    initial-potential: 2.65 
    equilibrate:
      enable: False
      time: 10
      plot: False
    initial-hold:
      enable: False
      time: 100
    species-cutoff: 1e-12 # Simulation cuts off if C_k <= this value

# Cantera inputs:
description: |-
  Cantera input file for an Li-Oxygen battery

phases:

- name: lithium_metal
  thermo: ideal-condensed
  species: ['Li[metal]']
  density: 0.534 g/cm^3 #verified
  state:
    T: 300.0
    P: 1 atm

- name: metal
  thermo: electron-cloud
  elements: [E]
  species: ['electron']
  state:
    X: {electron: 1.0}
  density: 1.0 kg/m^3

- name: conductor
  thermo: electron-cloud
  elements: [E]
  species: [e(sei)]
  state:
    X: {e(sei): 1.0}
  density: 1.0 kg/m^3

- name: lithium_electrolyte
  thermo: ideal-surface
  species: [(dummy)]
  kinetics: surface
  reactions: [lithium_electrolyte-reactions]
  site-density: 0.01 mol/cm^2  #Question: should I change this??

# Liquid electrolyte
- name: electrolyte
  thermo: ideal-condensed
  elements: [C, H, D, O, Li, E, F, P]
  species: ['C3H4O3(e)', 'C4H8O3(e)', 'Li+(e)', 'PF6-(e)', 'C2H6O2(e)', 'H2O(e)', 'C2H4(e)', 'CO(e)', 'CO2(e)' ]
  density: 1208.2, 'kg/m3'
  state:
    T: 300.0 K
    P: 1 atm
    X: {'C3H4O3(e)': 0.52, 'C4H8O3(e)': 0.3398, 'Li+(e)': 0.07, 'PF6-(e)': 0.07, 'C2H6O2(e)': 1.0E-6, 'H2O(e)': 1.0E-6, 'C2H4(e)': 1.0E-10, 'CO(e)': 1.0E-10, 'CO2(e)': 1.0E-10}
  standard-concentration-basis: unity

# SEI phase 
- name: sei
  thermo: ideal-condensed
  elements: [Li, C, O, H, E]
  species: ['LEDC(sei)', 'Li2CO3(sei)', 'Li2O(sei)']
  density: 2200 kg/m^3
  state: 
    T: 300.0 K
    P: 1 atm
    X: {'LEDC(sei)': 0.8, 'Li2CO3(sei)': 0.1, 'Li2O(sei)': 0.1}
  standard-concentration-basis: unity

# ----- surface phases -----#
# Anode-sei interface:
- name: tungsten-sei
  thermo: ideal-surface
  species: ['(dummy)']
  kinetics: surface
  reactions: [tungsten-sei-rxns]
  site-density: 0.01 mol/cm^2
  state:
    T: 300.0 K
    P: 1 atm

# Anode-electrolyte interface
- name: tungsten-elyte
  thermo: ideal-surface
  species: ['(dummy)']
  kinetics: surface
  reactions: none
  site-density: 0.01 mol/cm^2
  state:
    T: 300.0 K
    P: 1 atm

# SEI-electrolyte interface
- name: sei-elyte
  thermo: ideal-surface
  species: ['(dummy)']
  kinetics: surface
  reactions: [sei-elyte-rxns]
  site-density: 0.01 mol/cm^2
  state:
    T: 300.0 K
    P: 1 atm


# -----------------------------------------------------
#    SPECIES DECLARATIONS
# -----------------------------------------------------
species:
- name: Li[metal]
  composition: {Li: 1}
  thermo:
    model: constant-cp
    h0: 19.50 kJ/mol # Question: unverified - source?
    s0: 29.1 J/mol/K # verified NIST webbook
  equation-of-state:
    model: constant-volume
    molar-volume: 12.998 cm^3/mol #verified

- name: electron
  composition: {E: 1}
  thermo:
    model: constant-cp
    h0: 0.0 kJ/mol
    s0: 0.0 J/mol/K
  note: |-
    Electron, MW: 0.000545 g/mol
    Molar enthalpy and entropy set to zero (dummy entries because chemical
    potential is set to zero for a "metal" phase)

# Electron in SEI:
- name: 'e(sei)'
  composition: {E: 1}
  thermo: 
        model: constant-cp
        h0: 0.0     kcal/mol                        # dummy
        s0: 0.0     cal/mol/K                       # dummy
  note: |-
        Electron, MW 0.000545 J/mol
        Molar enthalpy and entropy set to zero 
        (dummy entries because chemical potential is 
        set to zero for ``metal'' phase - free energy equals charge times electric potential of the phase.)


- name: (dummy)
  composition: {}
  thermo:
    model: constant-cp
    h0: 0.0 kJ/mol
    s0: 0.0 J/mol/K
  note: Dummy species (needed for defining the interfaces)

- name: Li+(e)
  composition: {Li: 1, E: -1}
  thermo:
    model: constant-cp
    h0: -278.49 kJ/mol
    s0: 13.4 J/mol/K
  equation-of-state:
    model: constant-volume
    molar-volume: 5.508297619047619 cm^3/mol
  note: |- #Question: why is this using the density of electrolyte
    Lithium ion, MW: 6.940455 g/mol
    Density of electrolyte: 1260.0 kg/m3 (used to calculate species molar volume
    as molecular weight (MW)/density) 
    Molar enthalpy and entropy taken from Li+(aq) from P. Atkins "Physical
    Chemistry", Wiley-VCH (2006)

# Hexafluorophosphate anion
-   name: PF6-(e)
    composition: {P: 1, F: 6, E: 1}
    thermo: 
        model: constant-cp
        h0: 0.0         kcal/mol                    # Not chemically active
        s0: 0.0         cal/mol/K                   # Not chemically active
    equation-of-state:
        model: constant-volume
        molar-volume: 56.47 cm^3/mol                # (1*6.941+1*30.973762+6*18.998403)/2.69
    note: |-
        Density taken from LiPF6 mp-9143

# Ethylene
-   name: C2H4(e)
    composition: {C: 2, H: 4}
    thermo: 
        model: constant-cp
        h0:  52.5       kJ/mol                    # 
        s0:  0.0        J/mol/K                   #
    equation-of-state:
        model: constant-volume
        molar-volume: 27.2357 cm^3/mol              # (2*12.01 + 4*1.00784)/1.03
    note: |-
        Density taken from H2C mp-985782

# Ethylene Carbonate
-   name: C3H4O3(e)
    composition: {C: 3, H: 4, O: 3}
    thermo: 
        model: constant-cp
        h0: -315.6      kJ/mol                    # 
        s0:  0.0        J/mol/K                   # 
    equation-of-state:
        model: constant-volume
        molar-volume: 66.7 cm^3/mol                 # [2]
    note: |-

# Ethyl Methyl Carbonate
-   name: C4H8O3(e)
    composition: {D: 4, H: 8, O: 3}
    thermo: 
        model: constant-cp
        h0: 0.0         kcal/mol                    # Not chemically active
        s0: 0.0         cal/mol/K                   # Not chemically active
    equation-of-state:
        model: constant-volume
        molar-volume: 81.97 cm^3/mol                 
    note: |-
    
# Ethylene Glycol
- name: C2H6O2(e)
  composition: {C: 2, H: 6, O: 2}
  thermo: 
      model: constant-cp
      h0: -460.0         kJ/mol                   # CRC Handbook
      s0: 163.2         J/mol/K                   # CRC Handbook
  equation-of-state:
      model: constant-volume
      molar-volume: 21576.923 cm^3/mol                 
  note: |-

# CO2
- name: CO2(e) 
  composition: {C: 1,  O: 2}
  thermo:  
    model: NASA7 
    temperature-ranges: [200.00, 1000.00]
    data: 
    - [  2.35677352E+00,   8.98459677E-03, -7.12356269E-06,  2.45919022E-09,
        -1.43699548E-13,  -4.83719697E+04,  9.90105222E+00]
  equation-of-state:
      model: constant-volume
      molar-volume: 22005.0 cm^3/mol       
  note: |-
    Thermo from Gordon and McBride

# CO
- name: CO(e) 
  composition: {C: 1,  O: 1}
  thermo:  
    model: NASA7 
    temperature-ranges: [200.00, 1000.00]
    data: 
    - [  3.57953347E+00, -6.10353680E-04,  1.01681433E-06,  9.07005884E-10,
        -9.04424499E-13, -1.43440860E+04,  3.50840928E+00]
  equation-of-state:
      model: constant-volume
      molar-volume: 20007.1429 cm^3/mol       
  note: |-
    Thermo from Gordon and McBride

# H2O
- name: H2O(e) 
  composition: {H: 2,  O: 1}
  thermo: 
      model: constant-cp
      h0: -285.8         kJ/mol                   # CRC Handbook
      s0: 70.0           J/mol/K                  # CRC Handbook
  equation-of-state:
      model: constant-volume
      molar-volume: 18.01 cm^3/mol                 
  note: |-

# ----- SEI species ----- #
# LEDC
-   name: LEDC(sei)
    composition: {Li: 2, C: 4, H: 4, O: 6}
    thermo: 
        model: constant-cp
        h0: -1374.288   kJ/mol                    # Kupper & Bessler
        s0: 88.78           J/mol/K                   # Kupper & Bessler
    equation-of-state:
        model: constant-volume
        molar-volume: 96.2 cm^3/mol                 # [2]
    note: |-

-   name: Li2CO3(sei)
    composition: {Li: 2, C: 1, O: 3}
    thermo: 
        model: constant-cp
        h0: -1274.115   kJ/mol                      # Kupper & Bessler
        s0:  72.862     cal/mol/K                   # Kupper & Bessler
    equation-of-state:
        model: constant-volume
        molar-volume: 36.9449 cm^3/mol              # (2*6.941+12.0107+3*16)/2
    note: |-
        Density taken as the same as Li2CO3
        mp-3054

- name: Li2O(sei)
  composition: {Li: 2, O: 1}
  thermo: 
      model: constant-cp
      h0: -1197.9 kJ/mol #-597.9    kJ/mol               # CRC Handbook:
      s0: 37.6      J/mol/K              # CRC Handbook
  equation-of-state:
      model: constant-volume
      molar-volume: 13.582 cm^3/mol
    

# -----------------------------------------------------
#    REACTION DECLARATIONS
# -----------------------------------------------------

lithium_electrolyte-reactions:
- equation: Li[metal] <=> Li+(e) + electron
  id: lithium_faradaic_reaction
  rate-constant: {A: 6.0e+13, b: 0.0, Ea: 0.0} #{A: 6.0e+09, b: 0.0, Ea: 0.0}
  beta: 0.5

tungsten-sei-rxns:
- equation: e(sei) <=> electron
  rate-constant: {A: 1.0e-12, b: 0.0, Ea: 0.0}

sei-elyte-rxns:
- equation: Li+(e) + C3H4O3(e) + e(sei) <=> 0.5 C2H4(e) + 0.5 LEDC(sei)
  rate-constant: {A: 1.44e+10, b: 0.0, Ea: 55.5, 'kJ/mol' }
- equation: 2 Li+(e) + C3H4O3(e) + 2 e(sei) <=> Li2CO3(sei) + C2H4(e)
  rate-constant: {A: 2.16e+09, b: 0.0, Ea: 0.0}
- equation: 2 Li+(e) + Li2CO3(sei) + 2 e(sei) <=> 2 Li2O(sei) + CO(e)
  rate-constant: {A: 4.32e+10, b: 0.0, Ea: 0.0}
- equation: LEDC(sei) + H2O(e) <=> Li2CO3(sei) + CO2(e) + C2H6O2(e)
  rate-constant: {A: 1.48e+05, b: 0.0, Ea: 0.0}
